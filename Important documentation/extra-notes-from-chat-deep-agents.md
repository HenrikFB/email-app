Let me explain the complete architecture for how this would work with your incoming emails.

## ğŸ—ï¸ Complete Deep Agent Architecture

Based on [LangChain Deep Agents](https://docs.langchain.com/oss/javascript/deepagents/overview), here's how the full system would work:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DEEP AGENT ARCHITECTURE                            â”‚
â”‚                         (Email Analysis System)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                        â”‚    ğŸ“§ INCOMING EMAIL    â”‚                          â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     ğŸ§  ORCHESTRATOR AGENT                            â”‚   â”‚
â”‚  â”‚                       (Parent/Coordinator)                           â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  Role: Plan, delegate, coordinate, synthesize                        â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
â”‚  â”‚  â”‚ PLANNING (write_todos tool)                                     â”‚â”‚   â”‚
â”‚  â”‚  â”‚                                                                 â”‚â”‚   â”‚
â”‚  â”‚  â”‚ TODOS:                                                          â”‚â”‚   â”‚
â”‚  â”‚  â”‚ [âœ“] 1. Classify email type                                      â”‚â”‚   â”‚
â”‚  â”‚  â”‚ [âœ“] 2. Extract job listings (found 5)                           â”‚â”‚   â”‚
â”‚  â”‚  â”‚ [â†’] 3. Analyze each job (spawning 5 sub-agents)                 â”‚â”‚   â”‚
â”‚  â”‚  â”‚ [ ] 4. Search KB for relevant content                           â”‚â”‚   â”‚
â”‚  â”‚  â”‚ [ ] 5. Generate drafts if requested                             â”‚â”‚   â”‚
â”‚  â”‚  â”‚ [ ] 6. Final review and output                                  â”‚â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  Tools available:                                                    â”‚   â”‚
â”‚  â”‚  â€¢ write_todos - Create/update task list                            â”‚   â”‚
â”‚  â”‚  â€¢ spawn_task - Create sub-agent for isolated work                  â”‚   â”‚
â”‚  â”‚  â€¢ read_file - Read from file system (context/memory)               â”‚   â”‚
â”‚  â”‚  â€¢ write_file - Save to file system                                 â”‚   â”‚
â”‚  â”‚  â€¢ query_memory - Access long-term memory                           â”‚   â”‚
â”‚  â”‚  â€¢ final_answer - Return completed result                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â”‚ spawn_task (for each job)              â”‚
â”‚                                    â”‚                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚                          â”‚                          â”‚            â”‚
â”‚         â–¼                          â–¼                          â–¼            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ SUB-AGENT 1 â”‚           â”‚ SUB-AGENT 2 â”‚           â”‚ SUB-AGENT N â”‚       â”‚
â”‚  â”‚ Job Analyst â”‚           â”‚ Job Analyst â”‚    ...    â”‚ Job Analyst â”‚       â”‚
â”‚  â”‚             â”‚           â”‚             â”‚           â”‚             â”‚       â”‚
â”‚  â”‚ Context:    â”‚           â”‚ Context:    â”‚           â”‚ Context:    â”‚       â”‚
â”‚  â”‚ Only Job 1  â”‚           â”‚ Only Job 2  â”‚           â”‚ Only Job N  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                          â”‚                          â”‚            â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      ğŸ”„ SHARED MEMORY LAYER                          â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚  â”‚ File System     â”‚  â”‚ Database        â”‚  â”‚ LangGraph Store â”‚      â”‚   â”‚
â”‚  â”‚  â”‚ (Scratch Pad)   â”‚  â”‚ (Persistent)    â”‚  â”‚ (Thread Memory) â”‚      â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Current email â”‚  â”‚ â€¢ analyzed_     â”‚  â”‚ â€¢ Conversation  â”‚      â”‚   â”‚
â”‚  â”‚  â”‚   analysis      â”‚  â”‚   emails        â”‚  â”‚   history       â”‚      â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Temp results  â”‚  â”‚ â€¢ kb_documents  â”‚  â”‚ â€¢ Agent state   â”‚      â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Intermediate  â”‚  â”‚ â€¢ kb_chunks     â”‚  â”‚ â€¢ Learning      â”‚      â”‚   â”‚
â”‚  â”‚  â”‚   findings      â”‚  â”‚ â€¢ user_feedback â”‚  â”‚   across runs   â”‚      â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¬ Complete Flow: When an Email Arrives

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FLOW: Incoming Email â†’ Final Result                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚ PHASE 1: ORCHESTRATOR RECEIVES EMAIL                                        â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“§ Email: "5 new jobs matching your profile"                               â”‚
â”‚                    â”‚                                                        â”‚
â”‚                    â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ORCHESTRATOR: "New email received. Let me plan."                    â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: write_todos                                                â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ TODOS Created:                                                       â”‚   â”‚
â”‚  â”‚ [ ] Understand email (classify, extract key info)                    â”‚   â”‚
â”‚  â”‚ [ ] Find all job listings mentioned                                  â”‚   â”‚
â”‚  â”‚ [ ] For each job: find public source, extract data, validate        â”‚   â”‚
â”‚  â”‚ [ ] If matched: search KB for relevant past content                  â”‚   â”‚
â”‚  â”‚ [ ] If draft requested: generate cover letter                        â”‚   â”‚
â”‚  â”‚ [ ] Return final results to user                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚ PHASE 2: EMAIL UNDERSTANDING (Orchestrator does this)                       â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ORCHESTRATOR: "Analyzing email structure..."                        â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: analyze_email (own tool)                                   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ Findings:                                                            â”‚   â”‚
â”‚  â”‚ â€¢ Email type: Job alert from LinkedIn                                â”‚   â”‚
â”‚  â”‚ â€¢ Jobs mentioned: 5                                                  â”‚   â”‚
â”‚  â”‚ â€¢ Link format: Safelinks (will need web search)                     â”‚   â”‚
â”‚  â”‚ â€¢ Match criteria from config: ".NET, Python, Aarhus"                â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: write_file                                                 â”‚   â”‚
â”‚  â”‚ Saves: /scratch/email_understanding.json                            â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: write_todos (update)                                       â”‚   â”‚
â”‚  â”‚ [âœ“] Understand email â†’ DONE                                          â”‚   â”‚
â”‚  â”‚ [â†’] Find all job listings                                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚ PHASE 3: SPAWN SUB-AGENTS FOR EACH JOB                                      â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ORCHESTRATOR: "5 jobs found. Spawning sub-agents for parallel       â”‚   â”‚
â”‚  â”‚ analysis. Each agent gets isolated context."                        â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: spawn_task (5 times)                                       â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ spawn_task({                                                         â”‚   â”‚
â”‚  â”‚   task: "Analyze Job 1: Software Developer at BD Energy",           â”‚   â”‚
â”‚  â”‚   context: {                                                         â”‚   â”‚
â”‚  â”‚     link_text: "Software Developer BD Energy Â· Aarhus",             â”‚   â”‚
â”‚  â”‚     match_criteria: ".NET, Python, Aarhus",                         â”‚   â”‚
â”‚  â”‚     user_intent: "Find jobs and draft cover letters"                â”‚   â”‚
â”‚  â”‚   }                                                                  â”‚   â”‚
â”‚  â”‚ })                                                                   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ â†’ Creates JOB_ANALYST sub-agent with ONLY Job 1 in context          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â”‚ (5 parallel sub-agents)                â”‚
â”‚                                    â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ SUB-AGENT (Job Analyst) - Runs for EACH job                          â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ Context: Only this one job (clean, isolated)                        â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ STEP 1: Web Search                                                   â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: tavily_search                                              â”‚   â”‚
â”‚  â”‚ Query: "Software Developer BD Energy Aarhus"                        â”‚   â”‚
â”‚  â”‚ Result: Found bdenergy.dk/careers/...                               â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ STEP 2: Scrape Public Source                                         â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: firecrawl_scrape                                           â”‚   â”‚
â”‚  â”‚ URL: bdenergy.dk/careers/software-developer                         â”‚   â”‚
â”‚  â”‚ Result: Full job description (6KB markdown)                         â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ STEP 3: Extract Structured Data                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: extract_job_data                                           â”‚   â”‚
â”‚  â”‚ Result: { technologies: [".NET", "Azure"], location: "Aarhus", ... }â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ STEP 4: Self-Critique                                                â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: critique (internal reasoning)                              â”‚   â”‚
â”‚  â”‚ "Does this match the criteria?"                                     â”‚   â”‚
â”‚  â”‚ â€¢ .NET required â†’ Job has .NET? âœ… YES                               â”‚   â”‚
â”‚  â”‚ â€¢ Python required â†’ Job has Python? âŒ NO                            â”‚   â”‚
â”‚  â”‚ â€¢ Aarhus location â†’ Job in Aarhus? âœ… YES                            â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ Decision: PARTIAL MATCH (2/3 criteria)                               â”‚   â”‚
â”‚  â”‚ Confidence: 75%                                                      â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: return_result (to orchestrator)                            â”‚   â”‚
â”‚  â”‚ Returns: { job_id: 1, match: "partial", confidence: 0.75, data: {...}}â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â”‚ (All 5 sub-agents return results)      â”‚
â”‚                                    â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ORCHESTRATOR: "All job analyses complete. Aggregating..."           â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ Results received:                                                    â”‚   â”‚
â”‚  â”‚ â€¢ Job 1: PARTIAL MATCH (75%) - BD Energy                            â”‚   â”‚
â”‚  â”‚ â€¢ Job 2: FULL MATCH (92%) - Systematic                              â”‚   â”‚
â”‚  â”‚ â€¢ Job 3: NO MATCH (30%) - Hardware role                             â”‚   â”‚
â”‚  â”‚ â€¢ Job 4: FULL MATCH (88%) - CEGO                                    â”‚   â”‚
â”‚  â”‚ â€¢ Job 5: PARTIAL MATCH (70%) - Cernel                               â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: write_file                                                 â”‚   â”‚
â”‚  â”‚ Saves: /scratch/job_analysis_results.json                           â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: write_todos (update)                                       â”‚   â”‚
â”‚  â”‚ [âœ“] Analyze each job â†’ DONE                                          â”‚   â”‚
â”‚  â”‚ [â†’] Search KB for matched jobs                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚ PHASE 4: KB SEARCH (For matched jobs)                                       â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ORCHESTRATOR: "2 full matches found. Searching KB for relevant      â”‚   â”‚
â”‚  â”‚ past content. Spawning KB Search agent."                            â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: spawn_task                                                 â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ spawn_task({                                                         â”‚   â”‚
â”‚  â”‚   task: "Search KB for .NET and Azure cover letter content",        â”‚   â”‚
â”‚  â”‚   context: {                                                         â”‚   â”‚
â”‚  â”‚     requirements: [".NET", "Azure", "Aarhus"],                      â”‚   â”‚
â”‚  â”‚     user_kb_ids: ["kb-1", "kb-2", "kb-3"]                           â”‚   â”‚
â”‚  â”‚   }                                                                  â”‚   â”‚
â”‚  â”‚ })                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ SUB-AGENT (KB Researcher)                                            â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ STEP 1: Multi-intent search                                         â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: search_kb (multiple queries)                               â”‚   â”‚
â”‚  â”‚ Query 1: ".NET experience cover letter" â†’ 3 results                 â”‚   â”‚
â”‚  â”‚ Query 2: "Azure cloud projects" â†’ 2 results                         â”‚   â”‚
â”‚  â”‚ Query 3: "Aarhus location" â†’ 0 results                              â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ STEP 2: Self-Critique                                                â”‚   â”‚
â”‚  â”‚ "Did I find enough content?"                                        â”‚   â”‚
â”‚  â”‚ â€¢ .NET content: âœ… Strong (3 matches)                                â”‚   â”‚
â”‚  â”‚ â€¢ Azure content: âœ… Good (2 matches)                                 â”‚   â”‚
â”‚  â”‚ â€¢ Location content: âŒ Missing                                       â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ STEP 3: Try different approach                                       â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: search_kb                                                  â”‚   â”‚
â”‚  â”‚ Query: "Denmark relocation" â†’ 1 result (weak)                       â”‚   â”‚
â”‚  â”‚ Query: "why I want to work at" â†’ 2 results (generic but usable)     â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: return_result                                              â”‚   â”‚
â”‚  â”‚ Returns: { coverage: { .NET: "strong", Azure: "good",                â”‚   â”‚
â”‚  â”‚            location: "weak" }, content: [...] }                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚ PHASE 5: DRAFT GENERATION (If requested)                                    â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ORCHESTRATOR: "User wants drafts. Spawning Writer agent for          â”‚   â”‚
â”‚  â”‚ each matched job."                                                  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: spawn_task                                                 â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ spawn_task({                                                         â”‚   â”‚
â”‚  â”‚   task: "Generate cover letter for Systematic",                     â”‚   â”‚
â”‚  â”‚   context: {                                                         â”‚   â”‚
â”‚  â”‚     job_data: { ... },                                              â”‚   â”‚
â”‚  â”‚     kb_content: { ... },                                            â”‚   â”‚
â”‚  â”‚     coverage_gaps: ["location"]                                     â”‚   â”‚
â”‚  â”‚   }                                                                  â”‚   â”‚
â”‚  â”‚ })                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ SUB-AGENT (Writer)                                                   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ STEP 1: Generate initial draft                                       â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: generate_draft                                             â”‚   â”‚
â”‚  â”‚ Combines: job requirements + KB content                             â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ STEP 2: Self-Critique                                                â”‚   â”‚
â”‚  â”‚ "Does this draft address all requirements?"                         â”‚   â”‚
â”‚  â”‚ â€¢ .NET mentioned? âœ…                                                 â”‚   â”‚
â”‚  â”‚ â€¢ Azure mentioned? âœ…                                                â”‚   â”‚
â”‚  â”‚ â€¢ Company personalized? âŒ Generic                                   â”‚   â”‚
â”‚  â”‚ â€¢ Location addressed? âŒ Missing                                     â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ STEP 3: Research and revise                                          â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: tavily_search                                              â”‚   â”‚
â”‚  â”‚ Query: "Systematic company Aarhus mission"                          â”‚   â”‚
â”‚  â”‚ Found: "Systematic focuses on defense and healthcare software..."   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ STEP 4: Generate revised draft                                       â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: revise_draft                                               â”‚   â”‚
â”‚  â”‚ Adds: Company-specific paragraph, location interest                 â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ STEP 5: Final self-critique                                          â”‚   â”‚
â”‚  â”‚ "All requirements addressed? âœ… YES"                                 â”‚   â”‚
â”‚  â”‚ "Confidence: 88%"                                                    â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: return_result                                              â”‚   â”‚
â”‚  â”‚ Returns: { draft: "...", confidence: 0.88, revisions: 2 }            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚ PHASE 6: FINAL AGGREGATION                                                  â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ORCHESTRATOR: "All tasks complete. Compiling final result."          â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: read_file                                                  â”‚   â”‚
â”‚  â”‚ Reads: All results from /scratch/                                   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: write_todos (update)                                       â”‚   â”‚
â”‚  â”‚ [âœ“] All tasks complete                                               â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: save_to_database                                           â”‚   â”‚
â”‚  â”‚ Saves: analyzed_emails, kb_search_results                           â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ ğŸ› ï¸ Uses: final_answer                                               â”‚   â”‚
â”‚  â”‚ Returns to user: {                                                   â”‚   â”‚
â”‚  â”‚   matched_jobs: [                                                    â”‚   â”‚
â”‚  â”‚     { title: "Systematic", confidence: 92%, draft: "..." },         â”‚   â”‚
â”‚  â”‚     { title: "CEGO", confidence: 88%, draft: "..." }                â”‚   â”‚
â”‚  â”‚   ],                                                                 â”‚   â”‚
â”‚  â”‚   partial_matches: [...],                                           â”‚   â”‚
â”‚  â”‚   no_matches: [...]                                                 â”‚   â”‚
â”‚  â”‚ }                                                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Tools in Each Agent

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TOOL DISTRIBUTION ACROSS AGENTS                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ ğŸ§  ORCHESTRATOR (Parent Agent)                                      â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Planning & Coordination Tools:                                       â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚ â”‚ â”‚ write_todos     â”‚ Create/update task list, track progress    â”‚    â”‚    â”‚
â”‚ â”‚ â”‚ spawn_task      â”‚ Create sub-agent for isolated work         â”‚    â”‚    â”‚
â”‚ â”‚ â”‚ wait_for_tasks  â”‚ Wait for sub-agents to complete            â”‚    â”‚    â”‚
â”‚ â”‚ â”‚ aggregate       â”‚ Combine results from sub-agents            â”‚    â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Memory Tools:                                                        â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚ â”‚ â”‚ read_file       â”‚ Read from scratch pad / file system        â”‚    â”‚    â”‚
â”‚ â”‚ â”‚ write_file      â”‚ Save intermediate results                  â”‚    â”‚    â”‚
â”‚ â”‚ â”‚ list_files      â”‚ See what's in scratch pad                  â”‚    â”‚    â”‚
â”‚ â”‚ â”‚ query_memory    â”‚ Access long-term learning                  â”‚    â”‚    â”‚
â”‚ â”‚ â”‚ save_to_db      â”‚ Persist to Supabase                        â”‚    â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Output Tools:                                                        â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚ â”‚ â”‚ final_answer    â”‚ Return completed result to user            â”‚    â”‚    â”‚
â”‚ â”‚ â”‚ ask_user        â”‚ Request clarification if needed            â”‚    â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ ğŸ” JOB ANALYST (Sub-Agent)                                          â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Research Tools:                                                      â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚ â”‚ â”‚ tavily_search   â”‚ Web search for public job sources          â”‚    â”‚    â”‚
â”‚ â”‚ â”‚ firecrawl       â”‚ Scrape web pages to markdown               â”‚    â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Analysis Tools:                                                      â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚ â”‚ â”‚ extract_data    â”‚ Extract structured data from content       â”‚    â”‚    â”‚
â”‚ â”‚ â”‚ match_criteria  â”‚ Check job against user's criteria          â”‚    â”‚    â”‚
â”‚ â”‚ â”‚ critique        â”‚ Self-evaluate analysis quality             â”‚    â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Output:                                                              â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚ â”‚ â”‚ return_result   â”‚ Send result back to orchestrator           â”‚    â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ ğŸ“š KB RESEARCHER (Sub-Agent)                                        â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Search Tools:                                                        â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚ â”‚ â”‚ search_kb       â”‚ Hybrid search across knowledge bases       â”‚    â”‚    â”‚
â”‚ â”‚ â”‚ get_document    â”‚ Retrieve full document content             â”‚    â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Analysis Tools:                                                      â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚ â”‚ â”‚ evaluate_match  â”‚ Score how well content matches need        â”‚    â”‚    â”‚
â”‚ â”‚ â”‚ find_gaps       â”‚ Identify missing coverage                  â”‚    â”‚    â”‚
â”‚ â”‚ â”‚ critique        â”‚ Self-evaluate search quality               â”‚    â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Output:                                                              â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚ â”‚ â”‚ return_result   â”‚ Send results + gaps to orchestrator        â”‚    â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ âœï¸ WRITER (Sub-Agent)                                               â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Research Tools (for company info):                                   â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚ â”‚ â”‚ tavily_search   â”‚ Research company for personalization       â”‚    â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Generation Tools:                                                    â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚ â”‚ â”‚ generate_draft  â”‚ Create initial draft from KB + job data    â”‚    â”‚    â”‚
â”‚ â”‚ â”‚ revise_draft    â”‚ Improve draft based on critique            â”‚    â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Quality Tools:                                                       â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚ â”‚ â”‚ critique        â”‚ Self-evaluate draft quality                â”‚    â”‚    â”‚
â”‚ â”‚ â”‚ check_coverage  â”‚ Verify all requirements addressed          â”‚    â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Output:                                                              â”‚    â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚ â”‚ â”‚ return_result   â”‚ Send draft + confidence to orchestrator    â”‚    â”‚    â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¬ How Agents Communicate

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMMUNICATION PATTERNS                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚ 1. ORCHESTRATOR â†’ SUB-AGENT (spawn_task)                                    â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                                             â”‚
â”‚   Orchestrator                           Sub-Agent                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚   â”‚          â”‚  â”€â”€â”€ spawn_task â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚          â”‚                        â”‚
â”‚   â”‚          â”‚                          â”‚          â”‚                        â”‚
â”‚   â”‚          â”‚  {                       â”‚          â”‚                        â”‚
â”‚   â”‚          â”‚    task: "Analyze Job",  â”‚ Receives â”‚                        â”‚
â”‚   â”‚          â”‚    context: {            â”‚ isolated â”‚                        â”‚
â”‚   â”‚          â”‚      job_info: {...},    â”‚ context  â”‚                        â”‚
â”‚   â”‚          â”‚      criteria: {...}     â”‚          â”‚                        â”‚
â”‚   â”‚          â”‚    }                     â”‚          â”‚                        â”‚
â”‚   â”‚          â”‚  }                       â”‚          â”‚                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                             â”‚
â”‚   Key: Sub-agent gets ONLY what it needs, not full context                  â”‚
â”‚                                                                             â”‚
â”‚ 2. SUB-AGENT â†’ ORCHESTRATOR (return_result)                                 â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                                             â”‚
â”‚   Sub-Agent                              Orchestrator                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚   â”‚          â”‚  â”€â”€â”€ return_result â”€â”€â”€â”€â–¶ â”‚          â”‚                        â”‚
â”‚   â”‚          â”‚                          â”‚          â”‚                        â”‚
â”‚   â”‚ Finished â”‚  {                       â”‚ Collects â”‚                        â”‚
â”‚   â”‚ work     â”‚    success: true,        â”‚ all      â”‚                        â”‚
â”‚   â”‚          â”‚    data: {...},          â”‚ results  â”‚                        â”‚
â”‚   â”‚          â”‚    confidence: 0.85,     â”‚          â”‚                        â”‚
â”‚   â”‚          â”‚    reasoning: "..."      â”‚          â”‚                        â”‚
â”‚   â”‚          â”‚  }                       â”‚          â”‚                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                             â”‚
â”‚ 3. VIA FILE SYSTEM (Asynchronous / Large Data)                              â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                                             â”‚
â”‚   Agent A                    File System                    Agent B         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚          â”‚ write_file   â”‚ /scratch/â”‚  read_file  â”‚          â”‚         â”‚
â”‚   â”‚          â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚ data.jsonâ”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚          â”‚         â”‚
â”‚   â”‚          â”‚              â”‚          â”‚              â”‚          â”‚         â”‚
â”‚   â”‚ Produces â”‚              â”‚ Persists â”‚              â”‚ Consumes â”‚         â”‚
â”‚   â”‚ data     â”‚              â”‚ data     â”‚              â”‚ data     â”‚         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                             â”‚
â”‚   Use case: When data is too large for direct message                       â”‚
â”‚   Use case: When agents run at different times                              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§  Memory: Three Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ THREE TYPES OF MEMORY                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ 1. SCRATCH PAD (File System) - Per-Run Memory                       â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ What: Temporary files created during a single analysis run          â”‚    â”‚
â”‚ â”‚ Where: /scratch/{run_id}/                                           â”‚    â”‚
â”‚ â”‚ Lifetime: Deleted after run completes (or kept for debugging)       â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Files:                                                               â”‚    â”‚
â”‚ â”‚ /scratch/1234/                                                       â”‚    â”‚
â”‚ â”‚ â”œâ”€â”€ email_understanding.json    # What we understood about email    â”‚    â”‚
â”‚ â”‚ â”œâ”€â”€ job_1_analysis.json         # Sub-agent 1 result               â”‚    â”‚
â”‚ â”‚ â”œâ”€â”€ job_2_analysis.json         # Sub-agent 2 result               â”‚    â”‚
â”‚ â”‚ â”œâ”€â”€ kb_search_results.json      # KB researcher result             â”‚    â”‚
â”‚ â”‚ â”œâ”€â”€ draft_v1.md                 # Initial draft                    â”‚    â”‚
â”‚ â”‚ â”œâ”€â”€ draft_v2.md                 # Revised draft                    â”‚    â”‚
â”‚ â”‚ â””â”€â”€ final_result.json           # Aggregated output                â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Purpose: Avoid context overflow, enable parallel sub-agents         â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ 2. DATABASE (Supabase) - Permanent Storage                          â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ What: Your existing tables - persistent across all runs             â”‚    â”‚
â”‚ â”‚ Where: Supabase PostgreSQL                                          â”‚    â”‚
â”‚ â”‚ Lifetime: Permanent until user deletes                              â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Tables:                                                              â”‚    â”‚
â”‚ â”‚ â€¢ analyzed_emails      # Final analysis results                     â”‚    â”‚
â”‚ â”‚ â€¢ kb_documents         # User's knowledge base content              â”‚    â”‚
â”‚ â”‚ â€¢ kb_chunks            # Chunked + embedded content                 â”‚    â”‚
â”‚ â”‚ â€¢ agent_configurations # User's settings                            â”‚    â”‚
â”‚ â”‚ â€¢ user_feedback        # User corrections                           â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Purpose: Store final results, user data, learning feedback          â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ 3. LANGGRAPH STORE (Thread Memory) - Conversation + Learning        â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ What: Key-value store for agent memory across conversations         â”‚    â”‚
â”‚ â”‚ Where: LangGraph's built-in store (can be backed by Supabase)       â”‚    â”‚
â”‚ â”‚ Lifetime: Persists across threads/conversations                     â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ What's stored:                                                       â”‚    â”‚
â”‚ â”‚ â€¢ agent_learnings:                                                   â”‚    â”‚
â”‚ â”‚   {                                                                  â”‚    â”‚
â”‚ â”‚     "linkedin_urls": {                                               â”‚    â”‚
â”‚ â”‚       "best_approach": "tavily_search",                              â”‚    â”‚
â”‚ â”‚       "success_rate": 0.87,                                          â”‚    â”‚
â”‚ â”‚       "learned_at": "2025-11-28"                                     â”‚    â”‚
â”‚ â”‚     },                                                               â”‚    â”‚
â”‚ â”‚     "user_preferences": {                                            â”‚    â”‚
â”‚ â”‚       "prefers_typescript_over_react": true,                         â”‚    â”‚
â”‚ â”‚       "typical_confidence_threshold": 0.75                           â”‚    â”‚
â”‚ â”‚     }                                                                â”‚    â”‚
â”‚ â”‚   }                                                                  â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ â€¢ conversation_history (per thread):                                 â”‚    â”‚
â”‚ â”‚   What was discussed in this chat session                            â”‚    â”‚
â”‚ â”‚                                                                      â”‚    â”‚
â”‚ â”‚ Purpose: Learning across runs, remembering user preferences          â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚ HOW THEY WORK TOGETHER                                                      â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                                             â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚                    â”‚ Incoming Email  â”‚                                      â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                             â”‚                                               â”‚
â”‚                             â–¼                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚ ORCHESTRATOR                                                    â”‚      â”‚
â”‚   â”‚                                                                  â”‚      â”‚
â”‚   â”‚ 1. Read from LANGGRAPH STORE:                                   â”‚      â”‚
â”‚   â”‚    "I learned LinkedIn URLs need Tavily search"                 â”‚      â”‚
â”‚   â”‚                                                                  â”‚      â”‚
â”‚   â”‚ 2. Read from DATABASE:                                          â”‚      â”‚
â”‚   â”‚    "User's KB has .NET cover letters"                           â”‚      â”‚
â”‚   â”‚                                                                  â”‚      â”‚
â”‚   â”‚ 3. Write to SCRATCH PAD:                                        â”‚      â”‚
â”‚   â”‚    Save intermediate results as sub-agents work                 â”‚      â”‚
â”‚   â”‚                                                                  â”‚      â”‚
â”‚   â”‚ 4. When done, write to DATABASE:                                â”‚      â”‚
â”‚   â”‚    Save final analyzed_email                                    â”‚      â”‚
â”‚   â”‚                                                                  â”‚      â”‚
â”‚   â”‚ 5. Update LANGGRAPH STORE:                                      â”‚      â”‚
â”‚   â”‚    "This run was successful, update learning"                   â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Reasoning Back and Forth (Critique Loop)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CRITIQUE LOOP: The Key to Robust Agents                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚ Every sub-agent runs an internal critique loop:                             â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                                                                   â”‚    â”‚
â”‚   â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚    â”‚
â”‚   â”‚                    â”‚   START      â”‚                               â”‚    â”‚
â”‚   â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚    â”‚
â”‚   â”‚                           â”‚                                       â”‚    â”‚
â”‚   â”‚                           â–¼                                       â”‚    â”‚
â”‚   â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚    â”‚
â”‚   â”‚                    â”‚  ATTEMPT     â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚    â”‚
â”‚   â”‚                    â”‚  (Do work)   â”‚             â”‚                 â”‚    â”‚
â”‚   â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚                 â”‚    â”‚
â”‚   â”‚                           â”‚                     â”‚                 â”‚    â”‚
â”‚   â”‚                           â–¼                     â”‚                 â”‚    â”‚
â”‚   â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚                 â”‚    â”‚
â”‚   â”‚                    â”‚  CRITIQUE    â”‚             â”‚                 â”‚    â”‚
â”‚   â”‚                    â”‚  (Self-eval) â”‚             â”‚                 â”‚    â”‚
â”‚   â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚                 â”‚    â”‚
â”‚   â”‚                           â”‚                     â”‚                 â”‚    â”‚
â”‚   â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚                 â”‚    â”‚
â”‚   â”‚              â”‚                         â”‚        â”‚                 â”‚    â”‚
â”‚   â”‚              â–¼                         â–¼        â”‚                 â”‚    â”‚
â”‚   â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚                 â”‚    â”‚
â”‚   â”‚       â”‚   GOOD       â”‚          â”‚   NOT GOOD   â”‚â”‚                 â”‚    â”‚
â”‚   â”‚       â”‚   ENOUGH?    â”‚          â”‚   TRY AGAIN  â”œâ”˜                 â”‚    â”‚
â”‚   â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚    â”‚
â”‚   â”‚              â”‚                                                    â”‚    â”‚
â”‚   â”‚              â–¼                                                    â”‚    â”‚
â”‚   â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚    â”‚
â”‚   â”‚       â”‚   RETURN     â”‚                                            â”‚    â”‚
â”‚   â”‚       â”‚   RESULT     â”‚                                            â”‚    â”‚
â”‚   â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚    â”‚
â”‚   â”‚                                                                   â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â”‚ Example in Job Analyst:                                                     â”‚
â”‚                                                                             â”‚
â”‚   Attempt 1: Search "Software Developer BD Energy"                          â”‚
â”‚     â†’ Found: linkedin.com/jobs/... (blocked)                               â”‚
â”‚     â†’ Critique: "Link is LinkedIn, will fail. NOT GOOD."                   â”‚
â”‚                                                                             â”‚
â”‚   Attempt 2: Search "BD Energy careers software developer"                  â”‚
â”‚     â†’ Found: bdenergy.dk/careers/... (public)                              â”‚
â”‚     â†’ Critique: "Direct company source. GOOD."                             â”‚
â”‚                                                                             â”‚
â”‚   Attempt 1: Scrape bdenergy.dk                                             â”‚
â”‚     â†’ Got: Full job description                                            â”‚
â”‚     â†’ Critique: "Content received, 6KB. GOOD."                             â”‚
â”‚                                                                             â”‚
â”‚   Attempt 1: Extract data                                                   â”‚
â”‚     â†’ Got: { technologies: ["C#"], location: "Aarhus" }                    â”‚
â”‚     â†’ Critique: "Only 1 technology extracted. Email mentioned .NET.        â”‚
â”‚                  C# IS .NET. But also mentioned Azure. NOT COMPLETE."       â”‚
â”‚                                                                             â”‚
â”‚   Attempt 2: Re-extract with different prompt                               â”‚
â”‚     â†’ Got: { technologies: [".NET", "C#", "Azure"], location: "Aarhus" }   â”‚
â”‚     â†’ Critique: "All mentioned technologies found. GOOD."                  â”‚
â”‚                                                                             â”‚
â”‚   Return result with confidence: 92%                                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Summary: Your Architecture

| Component | What It Is | Tools | Memory | Communicates With |
|-----------|------------|-------|--------|-------------------|
| **Orchestrator** | Parent agent, coordinates everything | write_todos, spawn_task, final_answer | LangGraph Store (learning) | All sub-agents |
| **Job Analyst** | Sub-agent, analyzes one job | tavily, firecrawl, critique | Scratch pad (temp) | Orchestrator only |
| **KB Researcher** | Sub-agent, searches knowledge base | search_kb, critique | Scratch pad (temp) | Orchestrator only |
| **Writer** | Sub-agent, generates drafts | generate, revise, critique | Scratch pad (temp) | Orchestrator only |
| **Database** | Permanent storage | (not an agent) | Supabase tables | All agents read/write |
| **Scratch Pad** | Temp file system | ls, read, write | Per-run files | All agents in run |
| **LangGraph Store** | Long-term memory | query_memory, save_learning | Cross-run learning | Orchestrator mainly |

This is the [Deep Agents](https://docs.langchain.com/oss/javascript/deepagents/overview) pattern applied to your email analysis system!